{"version":3,"sources":["webpack:///./src/views/CartView.vue","webpack:///./src/views/CartView.vue?7c6d"],"names":["class","style","_createElementVNode","scope","_hoisted_11","_hoisted_21","_hoisted_26","_hoisted_31","_hoisted_35","_createVNode","_component_Toast","text","$data","ref","_component_ToastFail","_hoisted_4","_hoisted_8","_hoisted_9","_hoisted_10","onClick","$options","_createElementBlock","_Fragment","_renderList","carts","item","index","key","id","src","product","imageUrl","alt","_toDisplayString","title","type","placeholder","aria-label","aria-describedby","qty","$event","onBlur","_hoisted_39","_hoisted_41","total","_hoisted_43","_hoisted_45","_component_router_link","to","_hoisted_49","_component_DeleteModal","itemId","onDelItem","components","DeleteModal","Toast","ToastFail","data","products","cartProducts","cartsData","tempCart","temp","isloadingItem","couponCode","methods","getCart","this","$http","get","process","then","res","console","log","catch","rej","removeAll","delete","toastComponent","openToast","autoHideToast","removeCartItem","deleteComponent","$refs","deleteModal","hideModal","response","getCartItem","openModal","CarItemChange","change","parseInt","changeNumber","product_id","url","put","checkCoupon","code","post","created","mounted","toast","toastFailComponent","toastFail","__exports__","render"],"mappings":"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","file":"js/chunk-2d221bf6.a61119c0.js","sourcesContent":["<template>\n <div class=\"container\">\n  <div class=\"position-fixed d-block d-flex justify-content-end\"\n    style=\"right: 5%; width: 40px\">\n      <Toast :text=\"text\" ref=\"toast\"/>\n      <ToastFail :text=\"text\" ref=\"toastFail\"/>\n  </div>\n  <div class=\"mt-3\">\n    <h3 class=\"mt-3 mb-4\">購物車</h3>\n    <div class=\"row\">\n      <div class=\"col-md-8\">\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <th scope=\"col\" class=\"border-0 ps-0\">產品名稱</th>\n              <th scope=\"col\" class=\"border-0\">數量</th>\n              <th scope=\"col\" class=\"border-0\">售價</th>\n              <th scope=\"col\" class=\"border-0\" @click=\"removeAll\"> <i class=\"fas fa-times\"></i></th>\n            </tr>\n          </thead>\n          <tbody v-for=\"(item,index) in cartsData.carts\" :key=\"item.id\">\n             <tr class=\"border-bottom border-top\">\n              <th scope=\"row\" class=\"border-0 px-0 font-weight-normal py-4\">\n                <img :src=\"item.product.imageUrl\" alt=\"\"\n                style=\"width: 72px; height: 72px; object-fit: cover;\">\n                <p class=\"mb-0 fw-bold ms-3 d-inline-block\">{{ item.product.title }} </p>\n              </th>\n              <td class=\"border-0 align-middle\" style=\"max-width: 160px;\">\n                <div class=\"input-group pe-5\">\n                  <div class=\"input-group-prepend\">\n                    <button class=\"btn btn-outline-dark border-0 py-2\"\n                    type=\"button\" id=\"button-addon1\" @click=\"CarItemChange(item,index,'minus')\">\n                      <i class=\"fas fa-minus\" ></i>\n                    </button>\n                  </div>\n                  <input type=\"text\" class=\"form-control border-0 text-center my-auto shadow-none\"\n                  placeholder=\"\" aria-label=\"Example text with button addon\"\n                  aria-describedby=\"button-addon1\" v-model=\"item.qty\"\n                  @blur=\"CarItemChange(item,index,item.qty)\">\n                  <div class=\"input-group-append\">\n                    <button class=\"btn btn-outline-dark border-0 py-2\" type=\"button\"\n                    id=\"button-addon2\" @click=\"CarItemChange(item,index,'plus')\">\n                      <i class=\"fas fa-plus\"></i>\n                    </button>\n                  </div>\n                </div>\n              </td>\n              <td class=\"border-0 align-middle\">\n                <p class=\"mb-0 ms-auto\">NT${{item['final_total']}}</p></td>\n                <td class=\"border-0 align-middle\" @click=\"getCartItem(item)\">\n                <i class=\"fas fa-times\"></i></td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"input-group w-50 mb-3\">\n          <input type=\"text\"\n          class=\"form-control rounded-0 border-bottom border-top-0 border-start-0\n          border-end-0 shadow-none\" placeholder=\"優惠碼\"\n          aria-label=\"Recipient's username\" aria-describedby=\"button-addon2\"\n          v-model=\"couponCode\">\n          <div class=\"input-group-append\">\n            <button class=\"btn btn-outline-dark border-bottom border-top-0\n            border-start-0 border-end-0 rounded-0\" type=\"button\" id=\"button-addon2\"\n            @click=\"checkCoupon()\">\n            <i class=\"fas fa-paper-plane\"></i></button>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-4\">\n        <div class=\"border p-4 mb-4\">\n          <h4 class=\"fw-bold mb-4\">訂單細節</h4>\n          <table class=\"table text-muted border-bottom\">\n            <tbody>\n              <tr>\n                <th scope=\"row\" class=\"border-0 px-0 pt-4 font-weight-normal\">合計</th>\n                <td class=\"text-end border-0 px-0 pt-4\">NT${{cartsData.total}}</td>\n              </tr>\n              <tr>\n                <th scope=\"row\" class=\"border-0 px-0 pt-0 pb-4 font-weight-normal\">付款方式</th>\n                <td class=\"text-end border-0 px-0 pt-0 pb-4\">貨到付款</td>\n              </tr>\n            </tbody>\n          </table>\n          <div class=\"d-flex justify-content-between mt-4\">\n            <p class=\"mb-0 h4 fw-bold\">總共</p>\n            <p class=\"mb-0 h4 fw-bold\">NT${{cartsData['final_total']}}</p>\n          </div>\n          <router-link to=\"/order\"  class=\"btn btn-dark w-100 mt-4\">購買</router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class=\"bg-dark py-5\">\n  <div class=\"container\">\n    <div class=\"d-flex flex-column flex-md-row justify-content-between\n    align-items-md-end align-items-start text-white\">\n      <div class=\"mb-md-0 mb-1\">\n        <p class=\"mb-0\">02-3456-7890</p>\n        <p class=\"mb-0\">service@mail.com</p>\n      </div>\n      <p class=\"mb-0\">© 2020 LOGO All Rights Reserved.</p>\n    </div>\n  </div>\n  <DeleteModal :item=\"tempCart\" :itemId=\"temp\" ref=\"deleteModal\" @del-item=\"removeCartItem\"/>\n</div>\n</template>\n<script>\nimport DeleteModal from '@/components/DeleteModal.vue';\nimport Toast from '@/components/Toast.vue';\nimport ToastFail from '@/components/ToastFail.vue';\n\nexport default {\n  components: { DeleteModal, Toast, ToastFail },\n  data() {\n    return {\n      text: '',\n      products: [],\n      cartProducts: {},\n      cartsData: {},\n      tempCart: {},\n      temp: {},\n      isloadingItem: '',\n      couponCode: '',\n    };\n  },\n  // components: { DelModal },\n  methods: {\n    getCart() {\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          console.log('cartdata', res.data.data);\n          this.cartsData = res.data.data;\n        })\n        .catch((rej) => {\n          console.log(rej);\n        });\n    },\n    removeAll() {\n      this.$http.delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`)\n        .then((res) => {\n          console.log(res);\n          this.text = '購物車全部移除';\n          this.toastComponent.openToast();\n          this.toastComponent.autoHideToast();\n          this.getCart();\n        });\n    },\n    removeCartItem() {\n      console.log(this.temp);\n      this.$http.delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${this.temp}`)\n        .then((res) => {\n          console.log(res);\n          const deleteComponent = this.$refs.deleteModal;\n          deleteComponent.hideModal();\n          this.text = '移除品項';\n          this.toastComponent.openToast();\n          this.toastComponent.autoHideToast();\n          this.getCart();\n        })\n        .catch((rej) => {\n          console.log(rej.response);\n        });\n    },\n    getCartItem(item) {\n      this.temp = item.id;\n      this.tempCart = { ...item.product };\n      const deleteComponent = this.$refs.deleteModal;\n      deleteComponent.openModal();\n    },\n    CarItemChange(item, index, change) {\n      console.log(item, index, parseInt(change, 10));\n      const changeNumber = parseInt(change, 10);\n      // console.log('165', this.cartsData.carts[index].id);\n      if (change === 'plus') {\n        this.cartsData.carts[index].qty += 1;\n      } else if (change === 'minus') {\n        if (this.cartsData.carts[index].qty === 1) {\n          this.getCartItem(item);\n          return;\n        }\n        this.cartsData.carts[index].qty -= 1;\n      } else if (change > 0) {\n        this.cartsData.carts[index].qty = changeNumber;\n        // this.cartsData.carts[index].qty = change;\n      }\n      const data = {\n        product_id: this.cartsData.carts[index].id,\n        qty: this.cartsData.carts[index].qty,\n      };\n      console.log('173', data);\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${data.product_id}`;\n      this.$http.put(url, { data })\n        .then((res) => {\n          console.log(res);\n          this.getCart();\n          this.text = '更新完成';\n          this.toastComponent.openToast();\n          this.toastComponent.autoHideToast();\n        })\n        .catch((rej) => {\n          console.log(rej.response);\n        });\n    },\n    checkCoupon() {\n      console.log(this.couponCode);\n      const data = { code: this.couponCode };\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/coupon`;\n      this.$http.post(url, { data })\n        .then((res) => {\n          console.log(res);\n          this.getCart();\n        })\n        .catch((rej) => {\n          console.log(rej.response);\n        });\n    },\n  },\n  created() {\n    this.getCart();\n  },\n  mounted() {\n    this.toastComponent = this.$refs.toast;\n    this.toastFailComponent = this.$refs.toastFail;\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=19859816\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/liuyiming/Desktop/前端/7. Vue直播班/Week8_final_project/week8/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}