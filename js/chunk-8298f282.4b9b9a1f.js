(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8298f282"],{"00b4":function(e,t,a){"use strict";a("ac1f");var c=a("23e7"),n=a("da84"),o=a("c65b"),r=a("e330"),s=a("1626"),l=a("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=n.Error,b=r(/./.test);c({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!s(t))return b(this,e);var a=o(t,this,e);if(null!==a&&!l(a))throw new d("RegExp exec method returned something other than an Object or null");return!!a}})},4558:function(e,t,a){"use strict";a.r(t);a("b0c0");var c=a("7a23"),n={class:"bg-white sticky-top"},o={class:"position-fixed d-block d-flex justify-content-end",style:{right:"5%",width:"40px"}},r=Object(c["g"])("div",{class:"container"},null,-1),s={class:"container"},l={class:"row justify-content-center py-5"},i={class:"col-md-6"},d=Object(c["g"])("div",{class:"d-flex justify-content-between"},[Object(c["g"])("h2",{class:"mt-2"},"訂單明細")],-1),b={class:"mb-3"},u=Object(c["g"])("label",{for:"email",class:"text-muted form-label"},"信箱",-1),m={class:"mb-3"},f=Object(c["g"])("label",{for:"name",class:"text-muted form-label"},"姓名",-1),j={class:"mb-3"},p=Object(c["g"])("label",{for:"phone",class:"text-muted form-label"},"電話",-1),g={class:"mb-3"},O=Object(c["g"])("label",{for:"address",class:"text-muted form-label"},"地址",-1),h={class:"mb-3"},x=Object(c["g"])("label",{for:"ContactMessage",class:"text-muted mb-0"},"其他想問的問題",-1),v={class:"col-md-6 bg-white",style:{"min-height":"calc(100vh - 56px - 76px)"}},y=Object(c["g"])("div",{class:"d-flex justify-content-between"},[Object(c["g"])("h2",{class:"mt-2"},"購物明細")],-1),w={class:"w-100 p-3 position-relative"},k={class:"mb-0 fw-bold"},I={class:"mb-1 text-muted",style:{"font-size":"14px"}},V={class:"d-flex justify-content-between align-items-center w-100"},D={class:"input-group w-50 align-items-center"},T=["value"],$={class:"mb-0 ms-auto"},C={class:"table mt-4 text-muted"},F=Object(c["g"])("th",{scope:"row",class:"border-0 px-0 font-weight-normal"},"原價",-1),E={class:"text-end border-0 px-0"},q=Object(c["g"])("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"},"折扣",-1),G={class:"text-end border-0 px-0 pt-0"},S={class:"d-flex justify-content-between mt-4"},U=Object(c["g"])("p",{class:"mb-0 h4 fw-bold"},"總計",-1),N={class:"mb-0 h4 fw-bold"},M={class:"d-flex justify-content-end"};function P(e,t,a,P,R,_){var z=Object(c["D"])("Toast"),J=Object(c["D"])("ToastFail"),H=Object(c["D"])("Field"),K=Object(c["D"])("ErrorMessage"),X=Object(c["D"])("Form");return Object(c["y"])(),Object(c["f"])(c["a"],null,[Object(c["g"])("div",n,[Object(c["g"])("div",o,[Object(c["j"])(z,{text:R.text,ref:"toast"},null,8,["text"]),Object(c["j"])(J,{text:R.text,ref:"toastFail"},null,8,["text"])]),r]),Object(c["g"])("div",s,[Object(c["g"])("div",l,[Object(c["g"])("div",i,[d,Object(c["j"])(X,{ref:"form",onSubmit:_.createOrder},{default:Object(c["O"])((function(e){var a=e.errors;return[Object(c["g"])("div",b,[u,Object(c["j"])(H,{id:"email",name:"email",type:"email",class:Object(c["r"])(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:R.orderInfo.user.email,"onUpdate:modelValue":t[0]||(t[0]=function(e){return R.orderInfo.user.email=e})},null,8,["class","modelValue"]),Object(c["j"])(K,{name:"email",class:"invalid-feedback"})]),Object(c["g"])("div",m,[f,Object(c["j"])(H,{id:"name",name:"name",type:"name",class:Object(c["r"])(["form-control",{"is-invalid":a["name"]}]),placeholder:"請輸入 name",rules:"required",modelValue:R.orderInfo.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return R.orderInfo.user.name=e})},null,8,["class","modelValue"]),Object(c["j"])(K,{name:"name",class:"invalid-feedback"})]),Object(c["g"])("div",j,[p,Object(c["j"])(H,{id:"phone",name:"phone",type:"phone",class:Object(c["r"])(["form-control",{"is-invalid":a["phone"]}]),placeholder:"請輸入電話",rules:_.isPhone,modelValue:R.orderInfo.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return R.orderInfo.user.tel=e})},null,8,["class","rules","modelValue"]),Object(c["j"])(K,{name:"phone",class:"invalid-feedback"})]),Object(c["g"])("div",g,[O,Object(c["j"])(H,{id:"address",name:"address",type:"text",class:Object(c["r"])(["form-control",{"is-invalid":a["address"]}]),placeholder:"請輸入寄送地址",rules:"required",modelValue:R.orderInfo.user.address,"onUpdate:modelValue":t[3]||(t[3]=function(e){return R.orderInfo.user.address=e})},null,8,["class","modelValue"]),Object(c["j"])(K,{name:"address",class:"invalid-feedback"})]),Object(c["g"])("div",h,[x,Object(c["P"])(Object(c["g"])("textarea",{class:"form-control",rows:"3",id:"ContactMessage","onUpdate:modelValue":t[4]||(t[4]=function(e){return R.orderInfo.message=e}),placeholder:"message ... "},null,512),[[c["K"],R.orderInfo.message]])])]})),_:1},8,["onSubmit"])]),Object(c["g"])("div",v,[y,(Object(c["y"])(!0),Object(c["f"])(c["a"],null,Object(c["C"])(R.cartsData.carts,(function(t){return Object(c["y"])(),Object(c["f"])("div",{class:"d-flex mt-4 bg-light",key:t.id},[Object(c["g"])("div",{style:Object(c["s"])([{backgroundImage:"url(".concat(t.product.imageUrl,")")},{width:"120px",height:"120px","background-size":"cover","background-position":"center center"}]),alt:""},null,4),Object(c["g"])("div",w,[Object(c["g"])("p",k,Object(c["G"])(t.product.title),1),Object(c["g"])("p",I,Object(c["G"])(t.product.content),1),Object(c["g"])("div",V,[Object(c["g"])("div",D,[Object(c["g"])("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none bg-light px-0",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",value:t.qty},null,8,T)]),Object(c["g"])("p",$,"NT$"+Object(c["G"])(e.$filters.currency(t.total)),1)])])])})),128)),Object(c["g"])("table",C,[Object(c["g"])("tbody",null,[Object(c["g"])("tr",null,[F,Object(c["g"])("td",E,"NT$"+Object(c["G"])(R.cartsData.total),1)]),Object(c["g"])("tr",null,[q,Object(c["g"])("td",G," NT$"+Object(c["G"])(e.$filters.currency(R.cartsData.total-R.cartsData.final_total)),1)])])]),Object(c["g"])("div",S,[U,Object(c["g"])("p",N,"NT$"+Object(c["G"])(e.$filters.currency(R.cartsData.final_total)),1)]),Object(c["g"])("div",M,[Object(c["g"])("button",{onClick:t[5]||(t[5]=function(){return _.createOrder&&_.createOrder.apply(_,arguments)}),class:"btn btn-dark btn-block mt-4 rounded-0 py-3"}," 付款")])])])])],64)}a("ac1f"),a("00b4"),a("99af");var R=a("0eb4"),_=a("2534"),z={components:{Toast:R["a"],ToastFail:_["a"]},data:function(){return{text:"",cartsData:{},orderInfo:{user:{name:"",email:""}}}},methods:{isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},isRequired:function(e){return!!e||"This field is required"},getCart:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/cart")).then((function(t){console.log(t.data.data),e.cartsData=t.data.data})).catch((function(e){console.log(e)}))},createOrder:function(){var e=this,t=this.orderInfo;this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/order"),{data:t}).then((function(t){console.log(t),e.text="完成下訂單",e.toastComponent.openToast(),e.toastComponent.autoHideToast(),e.getCart()})).catch((function(e){console.log(e.response)}))}},created:function(){this.getCart()},mounted:function(){this.toastComponent=this.$refs.toast,this.toastFailComponent=this.$refs.toastFail}},J=a("6b0d"),H=a.n(J);const K=H()(z,[["render",P]]);t["default"]=K},b0c0:function(e,t,a){var c=a("83ab"),n=a("5e77").EXISTS,o=a("e330"),r=a("9bf2").f,s=Function.prototype,l=o(s.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(i.exec),b="name";c&&!n&&r(s,b,{configurable:!0,get:function(){try{return d(i,l(this))[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-8298f282.4b9b9a1f.js.map