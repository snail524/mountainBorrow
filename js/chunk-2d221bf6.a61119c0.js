(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221bf6"],{cc55:function(t,e,o){"use strict";o.r(e);var a=o("7a23"),c={class:"container"},n={class:"position-fixed d-block d-flex justify-content-end",style:{right:"5%",width:"40px"}},s={class:"mt-3"},l=Object(a["g"])("h3",{class:"mt-3 mb-4"},"購物車",-1),r={class:"row"},i={class:"col-md-8"},d={class:"table"},b=Object(a["g"])("th",{scope:"col",class:"border-0 ps-0"},"產品名稱",-1),p=Object(a["g"])("th",{scope:"col",class:"border-0"},"數量",-1),u=Object(a["g"])("th",{scope:"col",class:"border-0"},"售價",-1),m=Object(a["g"])("i",{class:"fas fa-times"},null,-1),g=[m],h={class:"border-bottom border-top"},j={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},O=["src"],f={class:"mb-0 fw-bold ms-3 d-inline-block"},v={class:"border-0 align-middle",style:{"max-width":"160px"}},C={class:"input-group pe-5"},x={class:"input-group-prepend"},y=["onClick"],w=Object(a["g"])("i",{class:"fas fa-minus"},null,-1),k=[w],D=["onUpdate:modelValue","onBlur"],I={class:"input-group-append"},T=["onClick"],$=Object(a["g"])("i",{class:"fas fa-plus"},null,-1),q=[$],M={class:"border-0 align-middle"},F={class:"mb-0 ms-auto"},G=["onClick"],_=Object(a["g"])("i",{class:"fas fa-times"},null,-1),A=[_],U={class:"input-group w-50 mb-3"},H={class:"input-group-append"},N=Object(a["g"])("i",{class:"fas fa-paper-plane"},null,-1),P=[N],R={class:"col-md-4"},V={class:"border p-4 mb-4"},B=Object(a["g"])("h4",{class:"fw-bold mb-4"},"訂單細節",-1),J={class:"table text-muted border-bottom"},K=Object(a["g"])("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"合計",-1),E={class:"text-end border-0 px-0 pt-4"},L=Object(a["g"])("tr",null,[Object(a["g"])("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"付款方式"),Object(a["g"])("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"貨到付款")],-1),z={class:"d-flex justify-content-between mt-4"},Q=Object(a["g"])("p",{class:"mb-0 h4 fw-bold"},"總共",-1),S={class:"mb-0 h4 fw-bold"},W=Object(a["i"])("購買"),X={class:"bg-dark py-5"},Y=Object(a["h"])('<div class="container"><div class="d-flex flex-column flex-md-row justify-content-between align-items-md-end align-items-start text-white"><div class="mb-md-0 mb-1"><p class="mb-0">02-3456-7890</p><p class="mb-0">service@mail.com</p></div><p class="mb-0">© 2020 LOGO All Rights Reserved.</p></div></div>',1);function Z(t,e,o,m,w,$){var _=Object(a["D"])("Toast"),N=Object(a["D"])("ToastFail"),Z=Object(a["D"])("router-link"),tt=Object(a["D"])("DeleteModal");return Object(a["y"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("div",c,[Object(a["g"])("div",n,[Object(a["j"])(_,{text:w.text,ref:"toast"},null,8,["text"]),Object(a["j"])(N,{text:w.text,ref:"toastFail"},null,8,["text"])]),Object(a["g"])("div",s,[l,Object(a["g"])("div",r,[Object(a["g"])("div",i,[Object(a["g"])("table",d,[Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[b,p,u,Object(a["g"])("th",{scope:"col",class:"border-0",onClick:e[0]||(e[0]=function(){return $.removeAll&&$.removeAll.apply($,arguments)})},g)])]),(Object(a["y"])(!0),Object(a["f"])(a["a"],null,Object(a["C"])(w.cartsData.carts,(function(t,e){return Object(a["y"])(),Object(a["f"])("tbody",{key:t.id},[Object(a["g"])("tr",h,[Object(a["g"])("th",j,[Object(a["g"])("img",{src:t.product.imageUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,O),Object(a["g"])("p",f,Object(a["G"])(t.product.title),1)]),Object(a["g"])("td",v,[Object(a["g"])("div",C,[Object(a["g"])("div",x,[Object(a["g"])("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:function(o){return $.CarItemChange(t,e,"minus")}},k,8,y)]),Object(a["P"])(Object(a["g"])("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":function(e){return t.qty=e},onBlur:function(o){return $.CarItemChange(t,e,t.qty)}},null,40,D),[[a["K"],t.qty]]),Object(a["g"])("div",I,[Object(a["g"])("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2",onClick:function(o){return $.CarItemChange(t,e,"plus")}},q,8,T)])])]),Object(a["g"])("td",M,[Object(a["g"])("p",F,"NT$"+Object(a["G"])(t["final_total"]),1)]),Object(a["g"])("td",{class:"border-0 align-middle",onClick:function(e){return $.getCartItem(t)}},A,8,G)])])})),128))]),Object(a["g"])("div",U,[Object(a["P"])(Object(a["g"])("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none",placeholder:"優惠碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":e[1]||(e[1]=function(t){return w.couponCode=t})},null,512),[[a["K"],w.couponCode]]),Object(a["g"])("div",H,[Object(a["g"])("button",{class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:e[2]||(e[2]=function(t){return $.checkCoupon()})},P)])])]),Object(a["g"])("div",R,[Object(a["g"])("div",V,[B,Object(a["g"])("table",J,[Object(a["g"])("tbody",null,[Object(a["g"])("tr",null,[K,Object(a["g"])("td",E,"NT$"+Object(a["G"])(w.cartsData.total),1)]),L])]),Object(a["g"])("div",z,[Q,Object(a["g"])("p",S,"NT$"+Object(a["G"])(w.cartsData["final_total"]),1)]),Object(a["j"])(Z,{to:"/order",class:"btn btn-dark w-100 mt-4"},{default:Object(a["O"])((function(){return[W]})),_:1})])])])])]),Object(a["g"])("div",X,[Y,Object(a["j"])(tt,{item:w.tempCart,itemId:w.temp,ref:"deleteModal",onDelItem:$.removeCartItem},null,8,["item","itemId","onDelItem"])])],64)}var tt=o("5530"),et=(o("99af"),o("ec05")),ot=o("0eb4"),at=o("2534"),ct={components:{DeleteModal:et["a"],Toast:ot["a"],ToastFail:at["a"]},data:function(){return{text:"",products:[],cartProducts:{},cartsData:{},tempCart:{},temp:{},isloadingItem:"",couponCode:""}},methods:{getCart:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/cart")).then((function(e){console.log("cartdata",e.data.data),t.cartsData=e.data.data})).catch((function(t){console.log(t)}))},removeAll:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/carts")).then((function(e){console.log(e),t.text="購物車全部移除",t.toastComponent.openToast(),t.toastComponent.autoHideToast(),t.getCart()}))},removeCartItem:function(){var t=this;console.log(this.temp),this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/cart/").concat(this.temp)).then((function(e){console.log(e);var o=t.$refs.deleteModal;o.hideModal(),t.text="移除品項",t.toastComponent.openToast(),t.toastComponent.autoHideToast(),t.getCart()})).catch((function(t){console.log(t.response)}))},getCartItem:function(t){this.temp=t.id,this.tempCart=Object(tt["a"])({},t.product);var e=this.$refs.deleteModal;e.openModal()},CarItemChange:function(t,e,o){var a=this;console.log(t,e,parseInt(o,10));var c=parseInt(o,10);if("plus"===o)this.cartsData.carts[e].qty+=1;else if("minus"===o){if(1===this.cartsData.carts[e].qty)return void this.getCartItem(t);this.cartsData.carts[e].qty-=1}else o>0&&(this.cartsData.carts[e].qty=c);var n={product_id:this.cartsData.carts[e].id,qty:this.cartsData.carts[e].qty};console.log("173",n);var s="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/cart/").concat(n.product_id);this.$http.put(s,{data:n}).then((function(t){console.log(t),a.getCart(),a.text="更新完成",a.toastComponent.openToast(),a.toastComponent.autoHideToast()})).catch((function(t){console.log(t.response)}))},checkCoupon:function(){var t=this;console.log(this.couponCode);var e={code:this.couponCode},o="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/coupon");this.$http.post(o,{data:e}).then((function(e){console.log(e),t.getCart()})).catch((function(t){console.log(t.response)}))}},created:function(){this.getCart()},mounted:function(){this.toastComponent=this.$refs.toast,this.toastFailComponent=this.$refs.toastFail}},nt=o("6b0d"),st=o.n(nt);const lt=st()(ct,[["render",Z]]);e["default"]=lt}}]);
//# sourceMappingURL=chunk-2d221bf6.a61119c0.js.map