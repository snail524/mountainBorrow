(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-068dec4e"],{"0063":function(t,e,o){"use strict";o("9638")},9638:function(t,e,o){},b0c0:function(t,e,o){var n=o("83ab"),r=o("5e77").EXISTS,c=o("e330"),a=o("9bf2").f,d=Function.prototype,l=c(d.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=c(i.exec),u="name";n&&!r&&a(d,u,{configurable:!0,get:function(){try{return s(i,l(this))[1]}catch(t){return""}}})},b9ab:function(t,e,o){"use strict";o.r(e);o("b64b");var n=o("7a23"),r={class:"container"},c={class:"position-fixed d-block d-flex justify-content-end",style:{right:"5%",width:"40px"}},a={class:"table mt-4"},d=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",null,"購買時間"),Object(n["g"])("th",null,"Email"),Object(n["g"])("th",null,"購買品項"),Object(n["g"])("th",null,"應付金額"),Object(n["g"])("th",null,"是否付款"),Object(n["g"])("th",null,"編輯")])],-1),l={class:"form-check form-switch"},i=["onUpdate:modelValue","onChange"],s={class:"btn-group"},u=["onClick"],b=["onClick"];function O(t,e,o,O,p,m){var h=Object(n["D"])("Toast"),f=Object(n["D"])("ToastFail"),j=Object(n["D"])("OrderModal"),g=Object(n["D"])("DelModal");return Object(n["y"])(),Object(n["f"])("div",r,[Object(n["g"])("div",c,[Object(n["j"])(h,{text:p.text,ref:"toast"},null,8,["text"]),Object(n["j"])(f,{text:p.text,ref:"toastFail"},null,8,["text"])]),Object(n["g"])("table",a,[d,Object(n["g"])("tbody",null,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(p.orders,(function(e,o){return Object(n["y"])(),Object(n["f"])("tr",{key:o},[Object(n["g"])("td",null,Object(n["G"])(t.$filters.date(e.create_at)),1),Object(n["g"])("td",null,Object(n["G"])(e.user.email),1),Object(n["g"])("td",null,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(Object.keys(e.products),(function(t){return Object(n["y"])(),Object(n["f"])("div",{key:t.id},Object(n["G"])(e.products[t].product.title)+" * "+Object(n["G"])(e.products[t].product.num),1)})),128))]),Object(n["g"])("td",null,Object(n["G"])(e.total),1),Object(n["g"])("td",null,[Object(n["g"])("div",l,[Object(n["P"])(Object(n["g"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":function(t){return e.is_paid=t},role:"switch",id:"flexSwitchCheckChecked",onChange:function(t){return m.changePaid(e,e.is_paid)}},null,40,i),[[n["J"],e.is_paid]])])]),Object(n["g"])("td",null,[Object(n["g"])("div",s,[Object(n["g"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return m.openCouponModal(!1,e)}},"編輯",8,u),Object(n["g"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return m.openDelCouponModal(e)}},"刪除",8,b)])])])})),128))])]),Object(n["j"])(j,{"is-new":p.isNew,order:p.tempOrder,ref:"orderModal",onUpdateOrder:m.updateOrder},null,8,["is-new","order","onUpdateOrder"]),Object(n["j"])(g,{item:p.tempOrder,ref:"delModal",onDelItem:m.delOrder},null,8,["item","onDelItem"])])}var p=o("5530"),m=(o("e9c4"),o("99af"),o("b0c0"),{class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),h={class:"modal-dialog",role:"document"},f={class:"modal-content"},j={class:"modal-header bg-dark text-white"},g={class:"modal-title",id:"exampleModalLabel"},v={key:0},y={key:1},x=Object(n["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),w={class:"modal-body"},C={class:"row"},M={class:"col"},k={class:"mb-3"},D={for:"due_date"},F={class:"mb-3"},$=Object(n["g"])("label",{for:"tel"},"電話 ",-1),N={class:"mb-3"},S=Object(n["g"])("label",{for:"mail"},"信箱 ",-1),T={class:"mb-3"},G=Object(n["g"])("label",{for:"address"},"地址 ",-1),J={class:"modal-footer"},U=Object(n["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1);function _(t,e,o,r,c,a){return Object(n["y"])(),Object(n["f"])("div",m,[Object(n["g"])("div",h,[Object(n["g"])("div",f,[Object(n["g"])("div",j,[Object(n["g"])("h5",g,[o.isNew?(Object(n["y"])(),Object(n["f"])("span",v,"新增優惠卷")):(Object(n["y"])(),Object(n["f"])("span",y,"編輯優惠卷"))]),x]),Object(n["g"])("div",w,[Object(n["g"])("div",C,[Object(n["g"])("div",M,[Object(n["g"])("div",k,[Object(n["g"])("label",D,"使用者名稱： "+Object(n["G"])(c.tempOrder.user.name),1)]),Object(n["g"])("div",F,[$,Object(n["P"])(Object(n["g"])("input",{type:"text",class:"form-control",id:"tel","onUpdate:modelValue":e[0]||(e[0]=function(t){return c.tempOrder.user.tel=t}),placeholder:"請輸入電話"},null,512),[[n["K"],c.tempOrder.user.tel]])]),Object(n["g"])("div",N,[S,Object(n["P"])(Object(n["g"])("input",{type:"text",class:"form-control",id:"mail","onUpdate:modelValue":e[1]||(e[1]=function(t){return c.tempOrder.user.email=t}),placeholder:"請輸入電話"},null,512),[[n["K"],c.tempOrder.user.email]])]),Object(n["g"])("div",T,[G,Object(n["P"])(Object(n["g"])("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":e[2]||(e[2]=function(t){return c.tempOrder.user.address=t}),placeholder:"請輸入電話"},null,512),[[n["K"],c.tempOrder.user.address]])])])])]),Object(n["g"])("div",J,[U,Object(n["g"])("button",{type:"button",class:"btn btn-primary",onClick:e[3]||(e[3]=function(e){return t.$emit("update-order",c.tempOrder)})},Object(n["G"])(o.isNew?"新增優惠卷":"更新訂單"),1)])])])],512)}var L=o("e0ae"),P={props:{order:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!1}},data:function(){return{tempOrder:{user:{name:"",tel:"",mail:"",address:""}},due_date:""}},emits:["update-order"],watch:{order:function(){this.tempOrder=this.order}},mixins:[L["a"]]},V=o("6b0d"),A=o.n(V);const I=A()(P,[["render",_]]);var K=I,B=o("ec05"),E=o("0eb4"),H=o("2534"),X={components:{OrderModal:K,DelModal:B["a"],Toast:E["a"],ToastFail:H["a"]},props:{config:Object},data:function(){return{orders:{},tempOrder:{title:""},isLoading:!1,isNew:!1,text:"",toastComponent:{},toastFailComponent:{}}},methods:{openCouponModal:function(t,e){this.isNew=t,this.isNew?this.tempOrder={due_date:(new Date).getTime()/1e3}:this.tempOrder=JSON.parse(JSON.stringify(e)),this.$refs.orderModal.openModal()},openDelCouponModal:function(t){this.tempOrder=Object(p["a"])({},t),console.log("102",this.tempOrder),this.$refs.delModal.openModal()},getOrders:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/admin/orders");this.$http.get(e).then((function(e){console.log(e),t.orders=e.data.orders})).catch((function(t){console.log(t)}))},updateOrder:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/admin/order/").concat(this.tempOrder.id),o="put",n=this.tempOrder;this.text="成功更新訂單",this.$http[o](e,{data:n}).then((function(e){t.isLoading=!1,t.$refs.orderModal.hideModal(),console.log(e),t.getOrders(),t.toastComponent.openToast(),t.toastComponent.autoHideToast()})).catch((function(e){t.isLoading=!1,console.log(e.response)}))},changePaid:function(t,e){console.log(e),this.tempOrder=Object(p["a"])({},t);var o=this.tempOrder,n="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/admin/order/").concat(this.tempOrder.id);this.$http.put(n,{data:o}).then((function(t){console.log(t)})).catch((function(t){console.log(t.response)}))},delOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/admin/order/").concat(this.tempOrder.id);this.$http.delete(e).then((function(e){console.log(e);var o=t.$refs.delModal;o.hideModal(),t.getOrders()})).catch((function(t){console.log(t.response)}))}},mounted:function(){this.toastComponent=this.$refs.toast,this.toastFailComponent=this.$refs.toastFail},created:function(){this.getOrders()}};o("0063");const q=A()(X,[["render",O]]);e["default"]=q},e0ae:function(t,e,o){"use strict";var n=o("7c2b"),r=o.n(n);e["a"]={methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new r.a(this.$refs.modal)}}},e9c4:function(t,e,o){var n=o("23e7"),r=o("da84"),c=o("d066"),a=o("2ba4"),d=o("e330"),l=o("d039"),i=r.Array,s=c("JSON","stringify"),u=d(/./.exec),b=d("".charAt),O=d("".charCodeAt),p=d("".replace),m=d(1..toString),h=/[\uD800-\uDFFF]/g,f=/^[\uD800-\uDBFF]$/,j=/^[\uDC00-\uDFFF]$/,g=function(t,e,o){var n=b(o,e-1),r=b(o,e+1);return u(f,t)&&!u(j,r)||u(j,t)&&!u(f,n)?"\\u"+m(O(t,0),16):t},v=l((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&n({target:"JSON",stat:!0,forced:v},{stringify:function(t,e,o){for(var n=0,r=arguments.length,c=i(r);n<r;n++)c[n]=arguments[n];var d=a(s,null,c);return"string"==typeof d?p(d,h,g):d}})}}]);
//# sourceMappingURL=chunk-068dec4e.8f200545.js.map